<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Rock-Paper-Scissors</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/style.css"/>
        <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous"/>  
    </head>

    <body>
        <header>
            <nav id="scoreboard">
                <ul>
                    <li>Round:<p id="round">0</p></li>
                    <li>User score:<p id="userScore">0</p></li>
                    <li>AI score:<p id="pcScore">0</p></li>
                    <li>Points needed to win:
                        <input type="text" id="pointsNeeded" name="points" value="3">
                    </li>
                </ul>
            </nav>
        </header>

        <main>
            <section id="animation">
                <div id="User">
                    <p>User</p>
                    <i class="fa fa-hand-rock" id="user_icon"></i>
                </div>

                <div id="Pc">
                    <p>AI</p>
                    <i class="fa fa-hand-rock" id="ai_icon"></i>
                </div>
            </section>

            <section>
                <p id="result"> </p>
            </section>

            <section id="option">
                <button onclick="game('rock')" type="button" id="rock">Rock</button>
                <button onclick="game('paper')" type="button" id="paper">Paper</button>
                <button onclick="game('scissor')" type="button" id="scissor">Scissor</button>
            </section>

        </main>

        <footer>
            <!-- Reset button -->
            <button onclick="reset()" type="button" id="reset">Reset</button>

        </footer>

        <script>
            // variables
            var round = parseInt(document.getElementById("round").innerHTML);
            var user_score = parseInt(document.getElementById("userScore").innerHTML);
            var pc_score = parseInt(document.getElementById("pcScore").innerHTML);
            var points_needed = document.getElementById("pointsNeeded");
            var score_to_win = parseInt(points_needed.value);

            function game(user_choice) {
                if (user_score < score_to_win && pc_score < score_to_win) {
                    round++;
                    document.getElementById("round").innerHTML = round;

                    // play animation
                    animation_user(); // get's overwritten by visual_update

                    // update the visual
                    visual_update(user_choice);

                    // checks if someone won
                    if (user_score == score_to_win) {
                        winner_text("You won :)");
                    }
                    else if (pc_score == score_to_win) {
                        winner_text("You lost :(");
                    }
                }
            }

            function visual_update(user_choice) {
                // PC choice
                // to-do | look up how the the pc can pick a random choice.
                let pc_choices = ["rock", "paper", "scissor"];
                pc_choice = pc_choices[Math.floor(Math.random() * pc_choices.length)];

                // text if of them wins
                let user_win_text = "Point for User";
                let pc_win_text = "Point for AI";

                // The same
                if (user_choice == "rock" && pc_choice == "rock") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-rock" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-rock" id="ai_icon"></i>';
                    document.getElementById("result").innerHTML = "The same";
                }
                else if (user_choice == "paper" && pc_choice == "paper") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-paper" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-paper" id="ai_icon"></i>';
                    document.getElementById("result").innerHTML = "The same";
                }
                else if (user_choice == "scissor" && pc_choice == "scissor") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-scissors" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-scissors" id="ai_icon"></i>';
                    document.getElementById("result").innerHTML = "The same";
                    rotate_user_scissor_correct();
                    rotate_pc_scissor_correct()
                }
                // User win
                else if (user_choice == "rock" && pc_choice == "scissor") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-rock" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-scissors" id="ai_icon"></i>';
                    user_scored(user_win_text);
                    rotate_pc_scissor_correct()
                }
                else if (user_choice == "paper" && pc_choice == "rock") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-paper" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-rock" id="ai_icon"></i>';
                    user_scored(user_win_text);
                }
                else if (user_choice == "scissor" && pc_choice == "paper") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-scissors" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-paper" id="ai_icon"></i>';
                    user_scored(user_win_text);
                    rotate_user_scissor_correct();
                }
                // AI win
                else if (user_choice == "rock" && pc_choice == "paper") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-rock" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-paper" id="ai_icon"></i>';
                    pc_scored(pc_win_text);
                }
                else if (user_choice == "paper" && pc_choice == "scissor") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-paper" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-scissors" id="ai_icon"></i>';
                    pc_scored(pc_win_text);
                    rotate_pc_scissor_correct();
                }
                else if (user_choice == "scissor" && pc_choice == "rock") {
                    document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-scissors" id="user_icon"></i>';
                    document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-rock" id="ai_icon"></i>';
                    pc_scored(pc_win_text);
                    rotate_user_scissor_correct();
                }
            }

            function pc_scored(text) {
                pc_score++;
                document.getElementById("result").innerHTML = text;
                document.getElementById("pcScore").innerHTML = pc_score;
            }

            function user_scored(text) {
                user_score++
                document.getElementById("result").innerHTML = text;
                document.getElementById("userScore").innerHTML = user_score;
            }

            function animation_user() {
                let element = document.getElementById("user_icon");
                element.classList.add("animation_userhand");
            }

            function rotate_user_scissor_correct() {
                document.getElementById("user_icon").style.transform = "rotate(165deg)";
            }

            function rotate_pc_scissor_correct() {
                document.getElementById("ai_icon").style.transform = "rotate(-165deg) scaleX(-1)";
            }

            function winner_text(text) {
                document.getElementById("result").style.fontSize = "3rem";
                document.getElementById("result").innerHTML = text;
            }

            function reset() {
                round = 0;
                user_score = 0;
                pc_score = 0;
                document.getElementById("user_icon").outerHTML = '<i class="fa fa-hand-rock" id="user_icon"></i>';
                document.getElementById("ai_icon").outerHTML = '<i class="fa fa-hand-rock" id="ai_icon"></i>';
                document.getElementById("result").innerHTML = "";
                document.getElementById("round").innerHTML = round;
                document.getElementById("userScore").innerHTML = user_score;
                document.getElementById("pcScore").innerHTML = pc_score;
                document.getElementById("result").style.fontSize = "1rem";
            }

            function upntw() {
                score_to_win = parseInt(points_needed.value);
            }

            points_needed.addEventListener("keyup", upntw);

        </script>
    </body>
</html>

